#!/bin/bash

#SBATCH --signal=B:USR1@120

trap 'kill -INT "$python_pid"' INT
trap 'kill -TERM "$python_pid"' TERM
trap 'kill -USR1 "$python_pid"' USR1
trap 'kill -USR2 "$python_pid"' USR2

cd $SCRIPT_DIR

source .shellscript_functions

for i in $(env | egrep "^SLURM" | sed -e 's#\s*=.*##' | grep -v SLURM_JOB_ID); do
	#echo "Unsetting $(env | grep $i)"
	unset $i
done

python3 .main.py $* &
python_pid=$!

wait "$python_pid"
